#!/usr/bin/bash

TOKEN=$(< ~/.arthur/github_token_v2)
GITHUB_RES=$(curl -s --header "Authorization: token $TOKEN" "https://api.github.com/orgs/Zimpler/teams/team-netscape/repos?per_page=100")

REPOS=($(echo $GITHUB_RES | jq '.[].name' | tr -d '"'))

for repo in ${REPOS[@]}; do
    if [[ ! -d $HOME/R/$repo ]]; then
        cd $HOME/R && git clone git@github.com:Zimpler/${repo}.git
    else
        echo "$repo is already cloned"
    fi
done
